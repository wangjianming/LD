// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.13/esri/copyright.txt for details.
//>>built
require({cache:{"url:esri/dijit/SymbolStyler/templates/SymbolStyler.html":'\x3cdiv data-dojo-attach-point\x3d"containerNode"\x3e\r\n  \x3cdiv class\x3d"${css.symbolPreviewContainer}"\x3e\r\n    \x3cdiv class\x3d"${css.symbolPreview}" data-dojo-attach-point\x3d"dap_symbolPreview"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv data-dojo-type\x3d"dijit/layout/StackController" class\x3d"${css.tabBar}" data-dojo-props\x3d"containerId:\'${id}_stackContainer\'" data-dojo-attach-point\x3d"dap_stackController"\x3e\x3c/div\x3e\r\n  \x3cdiv data-dojo-type\x3d"dijit/layout/StackContainer" id\x3d"${id}_stackContainer" data-dojo-attach-point\x3d"dap_stackContainer" data-dojo-props\x3d"doLayout: false" class\x3d"${css.content}"\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" title\x3d"${labels.shape}" data-dojo-attach-point\x3d"dap_shapeContainer"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"dap_symbolPicker"\x3e\x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"dap_useImageContent"\x3e\r\n        \x3cdiv class\x3d"${css.link}" data-dojo-attach-point\x3d"dap_addImage" tabindex\x3d"0"\x3e${labels.useImage}\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"dap_shapeImageUrlContainer" class\x3d"${css.shapeImageUrlContainer}"\x3e\r\n          \x3cdiv data-dojo-type\x3d"dijit/form/TextBox" data-dojo-attach-point\x3d"dap_shapeImageUrlInput" class\x3d"${css.urlInput} dijitInline"\x3e\x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"dap_loadShapeImageUrl" class\x3d"dijitInline ${css.addIcon}" tabindex\x3d"0"\x3e\x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"dap_shapeImageUrlErrorDisplay" class\x3d"${css.errorDisplay}"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"dap_shapeSizeLabel" class\x3d"${css.label}"\x3e${labels.symbolSize}\x3c/div\x3e\r\n      \x3cdiv class\x3d"${css.symbolSizeInput} ${css.inlineInput}" data-dojo-attach-point\x3d"dap_symbolSizeOptions"\x3e\r\n        \x3cdiv data-dojo-type\x3d"esri/dijit/HorizontalSlider" data-dojo-attach-point\x3d"dap_shapeSizeSlider"\x3e\x3c/div\x3e\r\n        \x3cdiv data-dojo-type\x3d"dijit/form/NumberSpinner"  data-dojo-attach-point\x3d"dap_shapeSizeTextBox"\x3e\x3c/div\x3e\r\n        \x3cspan class\x3d"${css.text}"\x3e${labels.px}\x3c/span\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" title\x3d"${labels.fill}" data-dojo-attach-point\x3d"dap_fillContainer"\x3e\r\n      \x3cdiv data-dojo-type\x3d"esri/dijit/ColorPicker" data-dojo-attach-point\x3d"dap_fillColorPicker" data-dojo-props\x3d"showSuggestedColors: true"\x3e\x3c/div\x3e\r\n      \x3cdiv data-dojo-type\x3d"esri/dijit/SymbolStyler/ColorRampPicker" data-dojo-attach-point\x3d"dap_fillColorRampPicker" class\x3d"${css.hidden}"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" title\x3d"${labels.outline}" data-dojo-attach-point\x3d"dap_outlineContainer"\x3e\r\n      \x3cdiv data-dojo-type\x3d"esri/dijit/ColorPicker" data-dojo-attach-point\x3d"dap_outlineColorPicker" data-dojo-props\x3d"showSuggestedColors: true"\x3e\x3c/div\x3e\r\n      \x3cdiv data-dojo-type\x3d"esri/dijit/SymbolStyler/ColorRampPicker" data-dojo-attach-point\x3d"dap_outlineColorRampPicker" class\x3d"${css.hidden}"\x3e\x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"dap_lineWidthLabel" class\x3d"${css.label}"\x3e${labels.lineWidth}\x3c/div\x3e\r\n      \x3cdiv class\x3d"${css.lineWidthInput} ${css.inlineInput}" data-dojo-attach-point\x3d"dap_lineWidthOptions"\x3e\r\n        \x3cdiv data-dojo-type\x3d"esri/dijit/HorizontalSlider" data-dojo-attach-point\x3d"dap_lineWidthSlider"\x3e\x3c/div\x3e\r\n        \x3cdiv data-dojo-type\x3d"dijit/form/NumberSpinner"  data-dojo-attach-point\x3d"dap_lineWidthTextBox"\x3e\x3c/div\x3e\r\n        \x3cspan class\x3d"${css.text}"\x3e${labels.px}\x3c/span\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"${css.label}" data-dojo-attach-point\x3d"dap_linePatternSelectLabel"\x3e${labels.pattern}\x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"dap_linePatternSelect"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n'}});
define("esri/dijit/SymbolStyler","../dijit/ColorPicker ../domUtils ../kernel ../symbol ./_EventedWidget ./_Tooltip ./ColorPicker/colorUtil ./SymbolStyler/_DelayedUpdate ./SymbolStyler/IconSelect ./SymbolStyler/MarkerSymbolPicker ./SymbolStyler/schemeUtil ./SymbolStyler/stylerUtil ./SymbolStyler/symbolUtil dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/a11yclick dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/has dojo/keys dojo/on dojo/string dojo/i18n!esri/nls/jsapi dojo/text!./SymbolStyler/templates/SymbolStyler.html ../dijit/HorizontalSlider ./SymbolStyler/MarkerSymbolPicker ./SymbolStyler/ColorRampPicker dijit/form/Button dijit/form/NumberSpinner dijit/form/Select dijit/form/TextBox dijit/layout/BorderContainer dijit/layout/ContentPane dijit/layout/StackController dijit/layout/StackContainer".split(" "),
function(m,f,u,k,l,v,w,x,n,y,p,g,d,z,A,q,B,C,c,h,D,E,r,s,t,F){l=C([l,z,A,x,v],{_RECENT_FILL_COLORS_ITEM_KEY:"symbolStyler/recent/fill/colors",_RECENT_OUTLINE_COLORS_ITEM_KEY:"symbolStyler/recent/outline/colors",_defaultMinLineWidthInPx:0,_defaultMinShapeSizeInPx:1,_defaultMaxLineWidthInPx:18,_defaultMaxShapeSizeInPx:120,declaredClass:"esri.dijit.SymbolStyler",baseClass:"esriSymbolStyler",templateString:F,labels:null,_originalSymbol:null,_editedSymbol:null,_activeTabName:null,_delayedCommitPropsTrigger:null,
_symbolPickerOpts:{},_symbolPreviewSurface:null,_linePatternSelect:null,_symbolPicker:null,_customImageSymbol:null,constructor:function(a){a=a?a:{};this._delayedCommitPropsTrigger=this.createUpdateTrigger(this._commitProperties,this);a.portalSelf?this._symbolPickerOpts.portalSelf=a.portalSelf:a.portalUrl&&(this._symbolPickerOpts.portalUrl=a.portalUrl);c.extend(this.constructor,{css:{symbolPreviewContainer:"esriSymbolPreviewContainer",symbolPreview:"esriSymbolPreview",tabBar:"esriTabBar",content:"esriContent",
link:"esriLink",label:"esriLabel",shapeImageUrlContainer:"esriShapeImageUrlContainer",urlInput:"esriUrlInput",addIcon:"esriAddIcon",errorDisplay:"esriErrorDisplay",symbolSizeInput:"esriSymbolSizeInput",inlineInput:"esriInlineInput",text:"esriText",hidden:"esriHidden",lineWidthInput:"esriLineWidthInput",linePattern:"esriLinePattern",linePatternInput:"esriLinePatternInput",alt:"esriAlt",disabled:"esriDisabled"}})},postMixInProperties:function(){this.inherited(arguments);this.labels=c.mixin({},t.common,
t.symbolEditor)},_setUpColorControls:function(a,b){var e=this.dap_outlineColorRampPicker,c=this.dap_outlineColorPicker,d=this.dap_fillColorRampPicker,f=this.dap_fillColorPicker,g;b?(g={colors:b.colors},b.scheme&&(g.scheme=b.scheme),this._isLine()?(e.set({schemes:a,selected:g,numStops:b.numStops}),this._hide(c.domNode),this._show(e.domNode)):(d.set({schemes:a,selected:g,numStops:b.numStops}),this._show(d.domNode),this._show(c.domNode),this._hide(f.domNode),this._hide(e.domNode))):(this._show(f.domNode),
this._show(c.domNode),this._hide(d.domNode),this._hide(e.domNode),this._updateSuggestedColors(f,p.getFillColors(a)));this._updateSuggestedColors(c,p.getOutlineColors(a))},edit:function(a,b){var e=d.cloneSymbol(a),c;b=b||{};this._colorRamp=c=b.colorRamp;this._originalSymbol=a;this._editedSymbol=e;this._activeTabName=b.activeTab;this._setUpColorControls(b.schemes,c);this._assimilateSymbol(e);this._toggleSizingControls(b.externalSizing);this._updateSymbolPicker()},_importRecentColors:function(){this.dap_fillColorPicker.loadRecentColors(this._RECENT_FILL_COLORS_ITEM_KEY);
this.dap_outlineColorPicker.loadRecentColors(this._RECENT_OUTLINE_COLORS_ITEM_KEY)},_hasColorRamp:function(){return!!this._colorRamp},_toggleSizingControls:function(a){var b=!1,e=!1;a&&(this._isLine()?e=!0:b=!0);h.toggle(this.dap_lineWidthLabel,this.css.disabled,e);this.dap_lineWidthTextBox.set("disabled",e);this.dap_lineWidthSlider.set("disabled",e);h.toggle(this.dap_shapeSizeLabel,this.css.disabled,b);this.dap_shapeSizeTextBox.set("disabled",b);this.dap_shapeSizeSlider.set("disabled",b)},_updateSymbolPicker:function(){var a=
this._isPoint()&&this._hasColorRamp()?"default":"portal";"portal"===a?f.show(this.dap_useImageContent):f.hide(this.dap_useImageContent);this._symbolPicker.set("displayMode",a);this._symbolPicker.clearSelection()},shapeSymbol:null,_setShapeSymbolAttr:function(a){this._adjustOutlineProperties(this._editedSymbol,a);this._set("shapeSymbol",a);this._editedSymbol=a;this._toggleTabs(a);this._delayedCommitPropsTrigger()},_adjustOutlineProperties:function(a,b){var e,c,f;this._switchedFromPictureMarkerSymbolToSimpleMarkerSymbol(a,
b)?(this.dap_fillColorPicker.set("color",b.color),e=d.getOutline(b),this.dap_outlineColorPicker.set("color",e.color),this.dap_lineWidthSlider.set("value",e.width),this._linePatternSelect.set("value",e.style)):this._switchedSimpleMarkerSymbolStyleToPureOutline(a,b)&&(e=d.getOutline(a),f=this.dap_outlineColorPicker.get("color"),e.color?(c=w.isBright(e.color))&&0.2>e.color.a?(f.a=0.2,this.dap_outlineColorPicker.set("color",f)):!c&&0.1>e.color.a&&(f.a=0.1,this.dap_outlineColorPicker.set("color",f)):this.dap_outlineColorPicker.set("color",
b.color))},_switchedFromPictureMarkerSymbolToSimpleMarkerSymbol:function(a,b){return a&&b&&"picturemarkersymbol"===a.type&&"simplemarkersymbol"===b.type},_switchedSimpleMarkerSymbolStyleToPureOutline:function(a,b){return a&&b&&"simplemarkersymbol"===a.type&&"simplemarkersymbol"===b.type&&-1==="x,cross".indexOf(a.style)&&-1<"x,cross".indexOf(b.style)},shapeSize:null,_setShapeSizeAttr:function(a){this._set("shapeSize",a);this._delayedCommitPropsTrigger()},_shapeImageUrl:null,_setShapeImageUrlAttr:function(a){this._set("shapeImageUrl",
a);this._delayedCommitPropsTrigger()},fillColor:null,_setFillColorAttr:function(a){a=a===m.NO_COLOR?null:a;this._set("fillColor",a);this._delayedCommitPropsTrigger()},fillColorRamp:null,_setFillColorRampAttr:function(a){this._set("fillColorRamp",a);this._delayedCommitPropsTrigger()},outlineColorRamp:null,_setOutlineColorRampAttr:function(a){this._set("outlineColorRamp",a);this._delayedCommitPropsTrigger()},outlineWidth:null,_setOutlineWidthAttr:function(a){this._set("outlineWidth",a);this._delayedCommitPropsTrigger()},
outlineColor:null,_setOutlineColorAttr:function(a){a=a===m.NO_COLOR?null:a;this._set("outlineColor",a);h.toggle(this.dap_lineWidthLabel,this.css.disabled,!a);this.dap_lineWidthSlider.set("disabled",!a);this.dap_lineWidthTextBox.set("disabled",!a);h.toggle(this.dap_linePatternSelectLabel,this.css.disabled,!a);this._linePatternSelect.set("disabled",!a);this._delayedCommitPropsTrigger()},outlinePattern:null,_setOutlinePatternAttr:function(a){this._set("outlinePattern",a);this._delayedCommitPropsTrigger()},
_getTabContainer:function(a){return"fill"===a?this.dap_fillContainer:"outline"===a?this.dap_outlineContainer:this.dap_shapeContainer},_storeRecentFillColors:function(){this._storeRecentColors(this.dap_fillColorPicker,this._RECENT_FILL_COLORS_ITEM_KEY)},_storeRecentOutlineColors:function(){this._storeRecentColors(this.dap_outlineColorPicker,this._RECENT_OUTLINE_COLORS_ITEM_KEY)},_storeRecentColors:function(a,b){a.addRecentColor(a.get("color"));a.saveRecentColors(b)},_isPoint:function(){return d.isPoint(this._editedSymbol)},
_isLine:function(){return d.isLine(this._editedSymbol)},_isPolygon:function(){return d.isPolygon(this._editedSymbol)},_addHandlers:function(){this.own(this.dap_shapeContainer.on("show",c.hitch(this,function(){this._symbolPicker._updateTemplatePickerIfHeightless()})));this._linePatternSelect.on("change",c.hitch(this,function(a){this.set("outlinePattern",a)}));this.own(r(this.dap_loadShapeImageUrl,q,c.hitch(this,function(){this._loadImage(this.dap_shapeImageUrlInput.get("value"))})));this.own(r(this.dap_addImage,
q,c.hitch(this,function(){f.show(this.dap_shapeImageUrlContainer);this.dap_shapeImageUrlInput.focus()})));this.dap_shapeImageUrlInput.on("input",c.hitch(this,function(a){a.keyCode===E.ENTER&&this._loadImage(this.dap_shapeImageUrlInput.get("value"))}));this.dap_shapeImageUrlInput.on("change",c.hitch(this,function(a){this.set("shapeImageUrl",a)}));this.dap_shapeSizeSlider.on("change",c.hitch(this,function(a){this.set("shapeSize",a)}));this.dap_fillColorPicker.on("color-change",c.hitch(this,function(a){this.set("fillColor",
a.color)}));this.dap_fillColorRampPicker.on("color-ramp-change",c.hitch(this,function(a){this.set("fillColorRamp",a.colors)}));this.dap_outlineColorRampPicker.on("color-ramp-change",c.hitch(this,function(a){this.set("outlineColorRamp",a.colors)}));this.dap_lineWidthSlider.on("change",c.hitch(this,function(a){this.set("outlineWidth",a)}));this.dap_outlineColorPicker.on("color-change",c.hitch(this,function(a){this.set("outlineColor",a.color)}));g.bindSliderAndSpinner(this.dap_lineWidthSlider,this.dap_lineWidthTextBox);
g.bindSliderAndSpinner(this.dap_shapeSizeSlider,this.dap_shapeSizeTextBox);this._symbolPicker.on("symbol-select",c.hitch(this,function(a){this._hideImageUrlInput();this.set("shapeSymbol",a.selection)}));this.dap_shapeSizeSlider.on("change",c.hitch(this,this._onSizeChange));this.dap_fillColorPicker.on("color-change",c.hitch(this,this._onFillColorChange));this.dap_outlineColorPicker.on("color-change",c.hitch(this,this._onOutlineColorChange));this.dap_lineWidthSlider.on("change",c.hitch(this,this._onWidthChange))},
getStyle:function(){var a={symbol:d.cloneSymbol(this._editedSymbol)},b;this._hasColorRamp()&&(b=this._isLine()?this.dap_outlineColorRampPicker:this.dap_fillColorRampPicker,c.mixin(a,b.getStyle()));return a},storeColors:function(){this._storeRecentFillColors();this._storeRecentOutlineColors()},postCreate:function(){this.inherited(arguments);this._linePatternSelect=new n({baseClass:n.prototype.baseClass+" "+this.baseClass+" "+this.css.linePatternInput},this.dap_linePatternSelect);f.hide(this.dap_shapeImageUrlContainer);
this.dap_lineWidthSlider.intermediateChanges=!0;this.dap_lineWidthTextBox.intermediateChanges=!0;this.dap_shapeSizeSlider.intermediateChanges=!0;this.dap_shapeSizeTextBox.intermediateChanges=!0;this.dap_fillColorPicker.trackColors=!1;this.dap_outlineColorPicker.trackColors=!1;this._linePatternSelect.addIconOptions(["solid","dot","dash","dashdot","dashdotdot"],this.css.linePattern);this._importRecentColors();this.createTooltips([{node:this.dap_shapeImageUrlContainer,label:this.labels.imageUrlInputTooltip},
{node:this.dap_addImage,label:this.labels.useImageTooltip},{node:this.dap_symbolSizeOptions},{node:this.dap_lineWidthOptions}])},_updateSliderAndTextBoxConstraints:function(a){a.textBox.set("constraints",{min:a.minimum,max:a.maximum});a.slider.set({minimum:a.minimum,maximum:a.maximum,discreteValues:a.maximum})},_loadImage:function(a){this._clearUrlImageErrorDisplay();d.testImageUrl(a).then(c.hitch(this,function(){var b,c;b=this._customImageSymbol;c=this.shapeSize;b?(b.url=a,b.height=c,b.width=c):
this._customImageSymbol=b=new k.PictureMarkerSymbol(a,c,c);this.set("shapeSymbol",b)}),c.hitch(this,function(){this._showUrlImageErrorDisplay(this.labels.imageLoadError)}))},_showUrlImageErrorDisplay:function(a){this.dap_shapeImageUrlErrorDisplay.innerHTML=a},_clearUrlImageErrorDisplay:function(){this.dap_shapeImageUrlErrorDisplay.innerHTML=""},_getActiveTabAttr:function(){var a=this.dap_stackContainer.selectedChildWidget;return a===this.dap_outlineContainer?"outline":a===this.dap_fillContainer?"fill":
"shape"},_updateTabs:function(a){this._toggleTabs(a);this._showRelevantTabs(a);this._selectActiveTab();g.ensureEnabledChildSelection(this.dap_stackContainer)},_supportsPattern:function(a){return d.isLine(a)||d.isPolygon(a)},_toggleTabs:function(a){this._shouldShowShapeTab(a)?this._enableTab("shape"):this._disableTab("shape");this._shouldShowFillTab(a)?this._enableTab("fill"):this._disableTab("fill");this._shouldShowOutlineTab(a)?(this._enableTab("outline"),this._supportsPattern(a)?(f.show(this.dap_linePatternSelectLabel),
f.show(this._linePatternSelect.domNode)):(f.hide(this.dap_linePatternSelectLabel),f.hide(this._linePatternSelect.domNode))):this._disableTab("outline")},_shouldShowShapeTab:function(a){return"simplemarkersymbol"===a.type||"picturemarkersymbol"===a.type},_enableTab:function(a){g.enable(this._getTabContainer(a))},_disableTab:function(a){g.disable(this._getTabContainer(a))},_shouldShowFillTab:function(a){return"simplemarkersymbol"===a.type&&a.style===k.SimpleMarkerSymbol.STYLE_CIRCLE||"simplemarkersymbol"===
a.type&&a.style===k.SimpleMarkerSymbol.STYLE_SQUARE||"simplemarkersymbol"===a.type&&a.style===k.SimpleMarkerSymbol.STYLE_DIAMOND||"simplefillsymbol"===a.type},_shouldShowOutlineTab:function(a){return"simplemarkersymbol"===a.type||"simplefillsymbol"===a.type||"cartographiclinesymbol"===a.type||"simplelinesymbol"===a.type},_syncControls:function(a){var b;this._hideImageUrlInput();this._updateSizingConstraints();this._shouldShowShapeTab(a)&&(b=d.getMarkerLength(a),this.set("shapeSize",b),g.silentlyUpdateIntermediateChangingValueWidget(this.dap_shapeSizeSlider,
b),g.silentlyUpdateIntermediateChangingValueWidget(this.dap_shapeSizeTextBox,b));this._shouldShowFillTab(a)&&(this.set("fillColor",a.color),this.dap_fillColorPicker.set("color",a.color,!1));this._shouldShowOutlineTab(a)&&(a=d.getOutline(a),this.set("outlineColor",a.color),this.set("outlineWidth",a.width),this.set("outlinePattern",a.style),this.dap_outlineColorPicker.set("color",a.color,!1),g.silentlyUpdateIntermediateChangingValueWidget(this.dap_lineWidthSlider,a.width),g.silentlyUpdateIntermediateChangingValueWidget(this.dap_lineWidthTextBox,
a.width),this._linePatternSelect.set("value",a.style,!1))},_updateSizingConstraints:function(){var a=d.getOutline(this._editedSymbol),a=a&&a.width>this._defaultMaxLineWidthInPx?Math.ceil(a.width):this._defaultMaxLineWidthInPx,b=d.getMarkerLength(this._editedSymbol),b=b>this._defaultMaxShapeSizeInPx?Math.ceil(b):this._defaultMaxShapeSizeInPx;this._updateSliderAndTextBoxConstraints({textBox:this.dap_lineWidthTextBox,slider:this.dap_lineWidthSlider,minimum:this._defaultMinLineWidthInPx,maximum:a});this.findTooltip(this.dap_lineWidthOptions).set("label",
s.substitute(this.labels.lineWidthTooltip,{min:this._defaultMinLineWidthInPx,max:a}));this._updateSliderAndTextBoxConstraints({textBox:this.dap_shapeSizeTextBox,slider:this.dap_shapeSizeSlider,minimum:this._defaultMinShapeSizeInPx,maximum:b});this.findTooltip(this.dap_symbolSizeOptions).set("label",s.substitute(this.labels.symbolSizeTooltip,{min:this._defaultMinShapeSizeInPx,max:b}))},_assimilateSymbol:function(a){this._updateTabs(a);this._syncControls(a)},startup:function(){this.inherited(arguments);
var a=new y(this._symbolPickerOpts,this.dap_symbolPicker);a.startup();this._symbolPicker=a;this._addHandlers()},_hideImageUrlInput:function(){this._clearUrlImageErrorDisplay();f.hide(this.dap_shapeImageUrlContainer);this.dap_shapeImageUrlInput.set("value","")},_showRelevantTabs:function(){var a=this.dap_stackContainer,b=this.dap_shapeContainer,c=this.dap_fillContainer,d=this.dap_outlineContainer;B.forEach(a.getChildren(),function(b){a.removeChild(b)});this._isPoint()&&(a.addChild(b),a.addChild(c),
a.addChild(d));this._isLine()&&a.addChild(d);this._isPolygon()&&(a.addChild(c),a.addChild(d));1===a.getChildren().length?f.hide(this.dap_stackController.domNode):f.show(this.dap_stackController.domNode)},_selectActiveTab:function(){var a=this._getTabContainer(this._activeTabName);-1<this.dap_stackContainer.getIndexOfChild(a)&&this.dap_stackContainer.selectChild(a)},_onFillColorChange:function(a){this.set("fillColor",a.color)},_onOutlineColorChange:function(a){this.set("outlineColor",a.color)},_getFillColor:function(){return!this._isLine()&&
this._hasColorRamp()?this._getMiddleItem(this.fillColorRamp):this.fillColor},_getMiddleItem:function(a){return a[Math.floor(0.5*(a.length-1))]},_getOutlineColor:function(){return this._isLine()&&this._hasColorRamp()?this._getMiddleItem(this.outlineColorRamp):this.outlineColor},_commitProperties:function(){var a=this._editedSymbol;this._shouldShowShapeTab(a)&&this._updateShapeSize();this._shouldShowFillTab(a)&&d.setFillColor(a,this._getFillColor());this._shouldShowOutlineTab(a)&&(d.setOutlineColor(a,
this._getOutlineColor()),this._updateOutlinePattern(),this._updateOutlineWidth());this._updatePreviewSymbol();this.emit("style-update")},_updatePreviewSymbol:function(){var a=this._editedSymbol,b=this.css.alt,c=this.dap_symbolPreview;this._symbolPreviewSurface&&this._symbolPreviewSurface.destroy();h.toggle(c,b,this._blendsIntoBackground(a));this._symbolPreviewSurface=d.renderOnSurface(a,c)},_blendsIntoBackground:function(a){return d.hasColor(a.outline)?this._isWhitish(a.outline.color):this._isWhitish(a.color)},
_isWhitish:function(a){return a&&246<a.r&&246<a.g&&246<a.b},destroy:function(){this.inherited(arguments);this._symbolPreviewSurface&&this._symbolPreviewSurface.destroy()},_updateSuggestedColors:function(a,b){a.set("suggestedColors",b)},_updateOutlineWidth:function(){d.setOutlineWidth(this._editedSymbol,this.outlineWidth)},_onWidthChange:function(a){this.set("outlineWidth",a)},_onSizeChange:function(a){this.set("shapeSize",a)},_updateShapeSize:function(){d.setSize(this._editedSymbol,this.shapeSize)},
_updateOutlinePattern:function(){this._shouldShowOutlineTab(this._editedSymbol)&&d.setOutlineStyle(this._editedSymbol,d.toFullLineStyle(this.outlinePattern))},_show:function(a){h.remove(a,this.css.hidden)},_hide:function(a){h.add(a,this.css.hidden)},popUp:function(a){g.popUp(this,a)}});D("extend-esri")&&c.setObject("dijit.SymbolStyler",l,u);return l});